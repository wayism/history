{{ $title := .Title }}
{{ if .IsHome }}
    {{ $title = .Site.Title }}
{{ else if .IsPage }}
    {{ $title = printf "%s | %s" .Title .Site.Title }}
{{ else }}
    {{ $title = printf "%s | %s" .Title .Site.Title }}
{{ end }}

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<meta name="format-detection" content="telephone=no">

<!-- Title and Description -->
<title>{{ $title }}</title>
<meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">

<!-- Author and Keywords -->
<meta name="author" content="{{ .Site.Params.author }}">
<meta name="keywords" content="{{ delimit .Site.Params.keywords ", " }}{{ if .Params.tags }}, {{ delimit .Params.tags ", " }}{{ end }}">

<!-- Canonical URL -->
<link rel="canonical" href="{{ .Permalink }}">

<!-- RSS Feed -->
<link rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" href="{{ "/index.xml" | absURL }}">

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="/images/logo/favicon.ico">
<link rel="apple-touch-icon" href="/images/logo/wayism-logo.png">

<!-- Open Graph Meta Tags -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:title" content="{{ $title }}">
<meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:locale" content="{{ .Site.Language.Lang }}">
{{ if .Params.featured_image }}
<meta property="og:image" content="{{ .Params.featured_image | absURL }}">
{{ else }}
<meta property="og:image" content="{{ .Site.Params.og_image | absURL }}">
{{ end }}

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="{{ .Site.Params.twitter_card }}">
<meta name="twitter:title" content="{{ $title }}">
<meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
{{ if .Params.featured_image }}
<meta name="twitter:image" content="{{ .Params.featured_image | absURL }}">
{{ else }}
<meta name="twitter:image" content="{{ .Site.Params.og_image | absURL }}">
{{ end }}
{{ if .Site.Params.twitter_site }}
<meta name="twitter:site" content="{{ .Site.Params.twitter_site }}">
{{ end }}

<!-- Article-specific meta tags -->
{{ if .IsPage }}
<meta property="article:author" content="{{ .Site.Params.author }}">
<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
{{ if .Params.periods }}
{{ range .Params.periods }}
<meta property="article:section" content="{{ . }}">
{{ end }}
{{ end }}
{{ if .Params.tags }}
{{ range .Params.tags }}
<meta property="article:tag" content="{{ . }}">
{{ end }}
{{ end }}
{{ end }}

<!-- Language and alternate language links -->
{{ if .IsTranslated }}
{{ range .AllTranslations }}
<link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}">
{{ end }}
{{ end }}

<!-- Generator -->
<meta name="generator" content="Hugo {{ hugo.Version }} - Wayism Historical Archive">

<!-- Robots -->
{{ if .Params.noindex }}
<meta name="robots" content="noindex, nofollow">
{{ else }}
<meta name="robots" content="index, follow">
{{ end }}

<!-- Stylesheets -->
<link rel="stylesheet" href="{{ "css/main.css" | absURL }}">
{{ if .Site.Params.search.enabled }}
<link rel="stylesheet" href="{{ "css/search.css" | absURL }}">
{{ end }}
<link rel="stylesheet" href="{{ "css/print.css" | absURL }}" media="print">

<!-- Preconnect for performance -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- Theme color for mobile browsers -->
<meta name="theme-color" content="#8B4513">

<!-- Additional page-specific head content -->
{{ if .Params.custom_css }}
<style>
{{ .Params.custom_css | safeCSS }}
</style>
{{ end }}

<!-- Structured data will be handled in json-ld.html partial -->
